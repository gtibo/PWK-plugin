[gd_scene load_steps=33 format=2]

[ext_resource path="res://demos/adventure/landmarks/location_3d.gd" type="Script" id=1]
[ext_resource path="res://demos/adventure/HDRI/photo_studio_loft_hall_4k.hdr" type="Texture" id=2]
[ext_resource path="res://demos/adventure/focus_manager/focus_manager.tres" type="Resource" id=3]
[ext_resource path="res://demos/adventure/focus_zone_3d.gd" type="Script" id=4]
[ext_resource path="res://demos/adventure/actors/dog_actor.tscn" type="PackedScene" id=5]
[ext_resource path="res://demos/adventure/actors/jeanpierre/jp_actor.tscn" type="PackedScene" id=6]
[ext_resource path="res://demos/adventure/rooms/outsite/Bush.gd" type="Script" id=7]
[ext_resource path="res://demos/adventure/rooms/outsite/outside_giprobe.tres" type="GIProbeData" id=14]
[ext_resource path="res://demos/adventure/navigation/navigation_setter.gd" type="Script" id=15]
[ext_resource path="res://demos/adventure/navigation/navigation_manager.tres" type="Resource" id=17]

[sub_resource type="PanoramaSky" id=30]
panorama = ExtResource( 2 )

[sub_resource type="Environment" id=31]
background_mode = 3
background_sky = SubResource( 30 )
ambient_light_color = Color( 0.262745, 0.337255, 0.54902, 1 )
ambient_light_sky_contribution = 0.8
fog_enabled = true
fog_color = Color( 0.847059, 0.92549, 1, 1 )
fog_depth_begin = 4.0
fog_depth_end = 60.0
tonemap_mode = 2
ssao_intensity = 0.2
ssao_quality = 0
dof_blur_far_distance = 6.1
dof_blur_near_distance = 6.06
glow_bloom = 0.1

[sub_resource type="SpatialMaterial" id=35]
albedo_color = Color( 0.423529, 0.423529, 0.423529, 1 )
uv1_triplanar = true

[sub_resource type="CubeMesh" id=52]
size = Vector3( 1.5, 1.5, 1.5 )

[sub_resource type="SphereShape" id=53]
radius = 0.6

[sub_resource type="Animation" id=54]
length = 0.001
tracks/0/type = "value"
tracks/0/path = NodePath("BushRoot/BushBody:rotation_degrees")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ Vector3( 0, 0, 0 ) ]
}
tracks/1/type = "value"
tracks/1/path = NodePath("BushRoot:rotation_degrees")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ Vector3( 0, 0, 0 ) ]
}

[sub_resource type="Animation" id=55]
resource_name = "shake"
length = 0.5
step = 0.05
tracks/0/type = "value"
tracks/0/path = NodePath("BushRoot/BushBody:rotation_degrees")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0.05, 0.2, 0.35, 0.5 ),
"transitions": PoolRealArray( 1, 1, 1, 1 ),
"update": 0,
"values": [ Vector3( 0, 0, 0 ), Vector3( 0, 0, 5 ), Vector3( 0, 0, -5 ), Vector3( 0, 0, 0 ) ]
}
tracks/1/type = "value"
tracks/1/path = NodePath("BushRoot:rotation_degrees")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray( 0, 0.15, 0.3, 0.45 ),
"transitions": PoolRealArray( 1, 1, 1, 1 ),
"update": 0,
"values": [ Vector3( 0, 0, 0 ), Vector3( 5, 0, 0 ), Vector3( -5, 0, 0 ), Vector3( 0, 0, 0 ) ]
}

[sub_resource type="Curve3D" id=49]
_data = {
"points": PoolVector3Array( 1.62164, 0, -0.261555, -1.62164, 0, 0.261555, -2.46894, 0, 0.0816085, 0.915442, 0, 0.902364, -0.915442, 0, -0.902364, -7.00692, 0, 0.00314187, -0.836976, 0, 0.575421, 0.836976, 0, -0.575421, -6.99384, 0, -4.94025, -1.11161, 0, -0.0130782, 1.11161, 0, 0.0130782, -2.0243, 0, -5.03179 ),
"tilts": PoolRealArray( 0, 0, 0, 0 )
}

[sub_resource type="CubeMesh" id=37]
size = Vector3( 1.5, 0.5, 1.5 )

[sub_resource type="BoxShape" id=39]
extents = Vector3( 0.75, 0.25, 0.75 )

[sub_resource type="ConvexPolygonShape" id=40]
points = PoolVector3Array( 0, 0, 0, 2, 0.5, 0, 2, 0, 0, 0, 0, 1.25, 2, 0.5, 1.25, 2, 0, 1.25 )

[sub_resource type="NavigationMesh" id=50]
vertices = PoolVector3Array( -1.6, 0.25, -12.4661, -0.7, 0.25, -12.7661, -0.7, 0.25, -13.3661, -9.4, 0.25, -13.3661, -1.6, 0.25, -5.86613, -1, 0.25, -8.26613, -1.6, 0.25, -8.56613, -6.7, 0.25, -6.16613, -9.4, 0.25, -3.46613, -7, 0.25, -3.46613, -6.7, 0.25, -6.16613, -9.4, 0.25, -13.3661, -6.7, 0.25, -6.16613, -1.6, 0.25, -8.56613, -1.6, 0.25, -12.4661, -9.4, 0.25, -13.3661, -0.7, 0.25, -13.3661, -0.7, 0.25, -12.7661, -0.0999994, 0.25, -12.4661, 9.5, 0.25, -13.3661, -1, 0.25, -8.26613, -1.6, 0.25, -5.86613, -1.6, 0.25, -5.26613, 3.2, 0.25, -5.26613, -0.0999994, 0.25, -8.56613, -0.0999994, 0.25, -12.4661, -0.0999994, 0.25, -8.56613, 3.2, 0.25, -5.26613, 9.5, 0.25, -2.56613, 9.5, 0.25, -13.3661, 3.2, 0.25, -5.26613, 3.5, 0.25, -2.26613, 9.5, 0.25, -2.56613, -5.8, 2.25, -4.96613, -5.8, 2.25, -1.96613, -2.8, 2.25, -1.96613, -2.8, 2.25, -4.96613, -0.7, 2.25, -4.06613, -0.7, 2.25, -1.06613, 2.3, 2.25, -1.06613, 2.3, 2.25, -4.06613, -1.3, 0.25, 1.93387, -1.3, 0.25, 0.13387, -1.9, 0.25, -0.766129, -6.7, 0.25, -0.766129, -6.7, 0.25, -0.766129, -7, 0.25, -3.46613, -9.4, 0.25, -3.46613, -9.4, 0.25, 5.53387, 1.1, 0.25, 5.53387, 1.1, 0.25, 1.93387, -1.3, 0.25, 1.93387, -1.3, 0.25, 1.93387, -6.7, 0.25, -0.766129, -9.4, 0.25, 5.53387, 1.1, 0.25, 5.53387, 3.5, 0.25, -2.26613, 3.5, 0.25, -1.36613, 4.1, 0.25, -1.06613, 9.5, 0.25, -2.56613, 4.1, 0.25, 1.63387, 1.1, 0.25, 1.93387, 1.1, 0.25, 5.53387, 9.5, 0.25, 5.53387, 4.1, 0.25, 1.63387, 9.5, 0.25, 5.53387, 9.5, 0.25, -2.56613, 4.1, 0.25, -1.06613 )
polygons = [ PoolIntArray( 1, 0, 2 ), PoolIntArray( 2, 0, 3 ), PoolIntArray( 5, 4, 6 ), PoolIntArray( 6, 4, 7 ), PoolIntArray( 9, 8, 10 ), PoolIntArray( 10, 8, 11 ), PoolIntArray( 13, 12, 14 ), PoolIntArray( 14, 12, 15 ), PoolIntArray( 17, 16, 18 ), PoolIntArray( 18, 16, 19 ), PoolIntArray( 21, 20, 22 ), PoolIntArray( 22, 20, 24 ), PoolIntArray( 22, 24, 23 ), PoolIntArray( 26, 25, 27 ), PoolIntArray( 27, 25, 29 ), PoolIntArray( 27, 29, 28 ), PoolIntArray( 32, 31, 30 ), PoolIntArray( 36, 35, 33 ), PoolIntArray( 33, 35, 34 ), PoolIntArray( 40, 39, 37 ), PoolIntArray( 37, 39, 38 ), PoolIntArray( 42, 41, 43 ), PoolIntArray( 43, 41, 44 ), PoolIntArray( 46, 45, 47 ), PoolIntArray( 47, 45, 48 ), PoolIntArray( 51, 50, 49 ), PoolIntArray( 52, 55, 53 ), PoolIntArray( 53, 55, 54 ), PoolIntArray( 57, 56, 58 ), PoolIntArray( 58, 56, 59 ), PoolIntArray( 61, 60, 62 ), PoolIntArray( 62, 60, 63 ), PoolIntArray( 67, 66, 64 ), PoolIntArray( 64, 66, 65 ) ]
geometry/parsed_geometry_type = 1
geometry/collision_mask = 4294967295

[sub_resource type="BoxShape" id=1]
extents = Vector3( 10, 0.1, 10 )

[sub_resource type="PlaneMesh" id=33]
size = Vector2( 20, 20 )

[sub_resource type="BoxShape" id=46]
extents = Vector3( 1.75, 1, 0.2 )

[sub_resource type="BoxShape" id=47]
extents = Vector3( 0.2, 1, 1 )

[sub_resource type="CubeMesh" id=38]
size = Vector3( 4, 2, 4 )

[sub_resource type="BoxShape" id=51]
extents = Vector3( 2, 1, 2 )

[sub_resource type="BoxShape" id=58]
extents = Vector3( 0.05, 0.5, 1.5 )

[sub_resource type="CubeMesh" id=56]
size = Vector3( 0.1, 1, 3 )

[sub_resource type="CubeMesh" id=57]
size = Vector3( 6, 0.1, 3 )

[sub_resource type="SphereShape" id=48]
radius = 0.813931

[node name="Spatial" type="Spatial"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource( 31 )

[node name="DirectionalLight" type="DirectionalLight" parent="."]
transform = Transform( 0.707107, -0.183013, 0.683013, 0, 0.965926, 0.258819, -0.707107, -0.183013, 0.683013, 0, 0, 0 )
light_color = Color( 1, 0.964706, 0.85098, 1 )
shadow_enabled = true
directional_shadow_normal_bias = 0.1

[node name="GIProbe" type="GIProbe" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.94791, -3.69938 )
extents = Vector3( 10, 2.50357, 10 )
data = ExtResource( 14 )

[node name="Bush" type="Spatial" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -8.468, 0, -9.01 )
script = ExtResource( 7 )

[node name="BushRoot" type="Spatial" parent="Bush"]

[node name="BushBody" type="MeshInstance" parent="Bush/BushRoot"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.668331, 0 )
material_override = SubResource( 35 )
use_in_baked_light = true
mesh = SubResource( 52 )
skeleton = NodePath("../../..")
material/0 = null

[node name="Area" type="Area" parent="Bush"]

[node name="CollisionShape" type="CollisionShape" parent="Bush/Area"]
shape = SubResource( 53 )

[node name="AnimationPlayer" type="AnimationPlayer" parent="Bush"]
anims/RESET = SubResource( 54 )
anims/shake = SubResource( 55 )

[node name="Spawn" type="Position3D" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -4.23621, 0, -10.8256 )
script = ExtResource( 1 )
landmark_name = "outside_door"

[node name="BushFront" type="Position3D" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -8.46244, 0, -7.72349 )
script = ExtResource( 1 )
landmark_name = "bush_front"

[node name="BushLeft" type="Position3D" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -9.37781, 0, -7.17781 )
script = ExtResource( 1 )
landmark_name = "bush_left"

[node name="BushRight" type="Position3D" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -7.43191, 0, -6.68252 )
script = ExtResource( 1 )
landmark_name = "bush_right"

[node name="Path" type="Path" parent="."]
curve = SubResource( 49 )

[node name="PathFollow" type="PathFollow" parent="Path"]
transform = Transform( 0.994665, 0, -0.103149, 0, 1, 0, 0.103149, 0, 0.994665, -2.46894, 0, 0.0816085 )
rotation_mode = 0

[node name="Assets" type="Spatial" parent="."]

[node name="MeshInstance3" type="MeshInstance" parent="Assets"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 2, 0.25, 0 )
material_override = SubResource( 35 )
use_in_baked_light = true
mesh = SubResource( 37 )
skeleton = NodePath("../..")
material/0 = null

[node name="StaticBody" type="StaticBody" parent="Assets/MeshInstance3"]

[node name="CollisionShape" type="CollisionShape" parent="Assets/MeshInstance3/StaticBody"]
shape = SubResource( 39 )

[node name="CSGPolygon" type="CSGPolygon" parent="Assets"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0.25, 0, 0.75 )
material_override = SubResource( 35 )
use_in_baked_light = true
polygon = PoolVector2Array( -1, 0, 1, 0.5, 1, 0 )
depth = 1.25

[node name="StaticBody2" type="StaticBody" parent="Assets/CSGPolygon"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0.5, 0.25, -0.5 )

[node name="CollisionShape" type="CollisionShape" parent="Assets/CSGPolygon/StaticBody2"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -1.5, -0.25, -0.75 )
shape = SubResource( 40 )

[node name="Navigation" type="Navigation" parent="."]
script = ExtResource( 15 )
navigation_manager = ExtResource( 17 )

[node name="NavigationMeshInstance" type="NavigationMeshInstance" parent="Navigation"]
navmesh = SubResource( 50 )

[node name="GroundCollision" type="StaticBody" parent="Navigation/NavigationMeshInstance"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.01, -3.96613 )
__meta__ = {
"_edit_group_": true
}

[node name="CollisionShape" type="CollisionShape" parent="Navigation/NavigationMeshInstance/GroundCollision"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.1, 0 )
shape = SubResource( 1 )

[node name="MeshInstance" type="MeshInstance" parent="Navigation/NavigationMeshInstance/GroundCollision"]
use_in_baked_light = true
mesh = SubResource( 33 )
skeleton = NodePath("../../../..")
material/0 = SubResource( 35 )

[node name="StaticBody2" type="StaticBody" parent="Navigation/NavigationMeshInstance"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 1, 0.25, 1 )
__meta__ = {
"_edit_group_": true
}

[node name="CollisionShape" type="CollisionShape" parent="Navigation/NavigationMeshInstance/StaticBody2"]
shape = SubResource( 46 )

[node name="StaticBody4" type="StaticBody" parent="Navigation/NavigationMeshInstance"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 1, 0.25, -0.7 )
collision_mask = 2
__meta__ = {
"_edit_group_": true
}

[node name="CollisionShape" type="CollisionShape" parent="Navigation/NavigationMeshInstance/StaticBody4"]
shape = SubResource( 46 )

[node name="StaticBody3" type="StaticBody" parent="Navigation/NavigationMeshInstance"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 3, 0.25, 0.3 )
__meta__ = {
"_edit_group_": true
}

[node name="CollisionShape" type="CollisionShape" parent="Navigation/NavigationMeshInstance/StaticBody3"]
shape = SubResource( 47 )

[node name="StaticBody" type="StaticBody" parent="Navigation/NavigationMeshInstance"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -4.25531, 0.947189, -3.37417 )

[node name="MeshInstance4" type="MeshInstance" parent="Navigation/NavigationMeshInstance/StaticBody"]
material_override = SubResource( 35 )
use_in_baked_light = true
mesh = SubResource( 38 )
skeleton = NodePath("../../../..")
material/0 = null

[node name="CollisionShape" type="CollisionShape" parent="Navigation/NavigationMeshInstance/StaticBody"]
shape = SubResource( 51 )

[node name="StaticBody5" type="StaticBody" parent="Navigation/NavigationMeshInstance"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0.770893, 0.947189, -2.5 )

[node name="MeshInstance4" type="MeshInstance" parent="Navigation/NavigationMeshInstance/StaticBody5"]
material_override = SubResource( 35 )
use_in_baked_light = true
mesh = SubResource( 38 )
skeleton = NodePath("../../../..")
material/0 = null

[node name="CollisionShape" type="CollisionShape" parent="Navigation/NavigationMeshInstance/StaticBody5"]
shape = SubResource( 51 )

[node name="VolleyTerrain" type="Spatial" parent="Navigation/NavigationMeshInstance"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -0.817, 0, -10.523 )

[node name="VolleyBallTerrain" type="Position3D" parent="Navigation/NavigationMeshInstance/VolleyTerrain"]
script = ExtResource( 1 )
landmark_name = "VolleyBallTerrain"

[node name="VolleyLeft" type="Position3D" parent="Navigation/NavigationMeshInstance/VolleyTerrain"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -2, 0, 0 )
script = ExtResource( 1 )
landmark_name = "volley_left"

[node name="VolleyRight" type="Position3D" parent="Navigation/NavigationMeshInstance/VolleyTerrain"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 2, 0, 0 )
script = ExtResource( 1 )
landmark_name = "volley_right"

[node name="StaticBody" type="StaticBody" parent="Navigation/NavigationMeshInstance/VolleyTerrain"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0.000208974, 0.468427, 0 )

[node name="CollisionShape" type="CollisionShape" parent="Navigation/NavigationMeshInstance/VolleyTerrain/StaticBody"]
shape = SubResource( 58 )

[node name="Filet" type="MeshInstance" parent="Navigation/NavigationMeshInstance/VolleyTerrain"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0.000208974, 0.768308, 0 )
material_override = SubResource( 35 )
use_in_baked_light = true
mesh = SubResource( 56 )
skeleton = NodePath("../../../..")
material/0 = null

[node name="Filet2" type="MeshInstance" parent="Navigation/NavigationMeshInstance/VolleyTerrain"]
material_override = SubResource( 35 )
use_in_baked_light = true
mesh = SubResource( 57 )
skeleton = NodePath("../../../..")
material/0 = null

[node name="VolleyCamera" type="Camera" parent="Navigation/NavigationMeshInstance/VolleyTerrain" groups=["camera"]]
transform = Transform( 1, 0, 0, 0, 0.906308, 0.422618, 0, -0.422618, 0.906308, 0, 3, 4.5 )
fov = 50.0

[node name="Dog" parent="." instance=ExtResource( 5 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -3.8956, 0.5, 1.42914 )

[node name="TalkToDog" type="Area" parent="Dog"]
script = ExtResource( 4 )
main_focus_manager = ExtResource( 3 )
zone_name = "Dog"

[node name="CollisionShape" type="CollisionShape" parent="Dog/TalkToDog"]
shape = SubResource( 48 )

[node name="FrontDog" type="Position3D" parent="Dog"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 1.39363, -0.5, 0 )
script = ExtResource( 1 )
landmark_name = "front_dog"

[node name="JPActor" parent="." instance=ExtResource( 6 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -3.32558, 0.0100002, -10.9889 )

[node name="TalkToJP" type="Area" parent="JPActor"]
script = ExtResource( 4 )
main_focus_manager = ExtResource( 3 )
zone_name = "JP"

[node name="CollisionShape" type="CollisionShape" parent="JPActor/TalkToJP"]
shape = SubResource( 48 )

[connection signal="body_entered" from="Bush/Area" to="Bush" method="_on_Area_body_entered"]
[connection signal="body_exited" from="Bush/Area" to="Bush" method="_on_Area_body_exited"]
